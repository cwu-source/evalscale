<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChestXR-Detect | Developer Detail | EvalScale</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --color-bg: #f8f9fc;
            --color-bg-gradient-1: #e8f4f8;
            --color-bg-gradient-2: #f0e8f8;
            --color-text-primary: #1a1f36;
            --color-text-secondary: #4a5568;
            --color-text-muted: #718096;
            --color-accent-blue: #0066cc;
            --color-accent-teal: #0d9488;
            --color-accent-purple: #7c3aed;
            --color-accent-green: #10b981;
            --color-accent-orange: #f59e0b;
            --color-accent-red: #ef4444;
            --color-glass-bg: rgba(255, 255, 255, 0.7);
            --color-glass-border: rgba(255, 255, 255, 0.8);
            --color-glass-shadow: rgba(0, 50, 100, 0.08);
            --font-display: 'Instrument Serif', Georgia, serif;
            --font-body: 'DM Sans', -apple-system, sans-serif;
        }
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-body); background: var(--color-bg); color: var(--color-text-primary); line-height: 1.6; min-height: 100vh; }
        .bg-gradient { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(ellipse at 20% 20%, var(--color-bg-gradient-1) 0%, transparent 50%), radial-gradient(ellipse at 80% 80%, var(--color-bg-gradient-2) 0%, transparent 50%), var(--color-bg); }
        .navbar { display: flex; align-items: center; justify-content: space-between; padding: 16px 40px; background: var(--color-glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid var(--color-glass-border); position: sticky; top: 0; z-index: 100; }
        .nav-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; color: var(--color-text-primary); }
        .nav-logo-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-teal)); border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        .nav-logo-icon svg { width: 20px; height: 20px; fill: white; }
        .nav-logo-text { font-family: var(--font-display); font-size: 1.5rem; }
        .nav-breadcrumb { display: flex; align-items: center; gap: 8px; color: var(--color-text-muted); font-size: 0.875rem; }
        .nav-breadcrumb a { color: var(--color-text-muted); text-decoration: none; transition: color 0.2s; }
        .nav-breadcrumb a:hover { color: var(--color-accent-blue); }
        .nav-breadcrumb span { color: var(--color-text-primary); font-weight: 500; }
        .nav-breadcrumb svg { width: 16px; height: 16px; fill: currentColor; }
        .nav-user-avatar { width: 36px; height: 36px; background: linear-gradient(135deg, var(--color-accent-purple), #a855f7); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem; }
        .main { padding: 40px; max-width: 1400px; margin: 0 auto; }
        .model-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 32px; animation: fadeInUp 0.6s ease-out; }
        .model-title-section { display: flex; align-items: center; gap: 20px; }
        .model-icon { width: 64px; height: 64px; background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-teal)); border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 16px rgba(0, 102, 204, 0.25); }
        .model-icon svg { width: 32px; height: 32px; fill: white; }
        .model-title { font-family: var(--font-display); font-size: 2rem; margin-bottom: 4px; }
        .model-meta { display: flex; align-items: center; gap: 12px; color: var(--color-text-secondary); font-size: 0.9375rem; }
        .model-version-tag { padding: 4px 10px; background: rgba(0, 102, 204, 0.1); color: var(--color-accent-blue); border-radius: 6px; font-weight: 500; font-size: 0.8125rem; }
        .model-status { padding: 6px 14px; border-radius: 100px; font-size: 0.8125rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; background: rgba(124, 58, 237, 0.15); color: var(--color-accent-purple); }
        .model-actions { display: flex; gap: 12px; }
        .btn { padding: 12px 24px; border-radius: 12px; font-family: var(--font-body); font-size: 0.9375rem; font-weight: 500; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; border: none; }
        .btn-primary { background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-teal)); color: white; box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0, 102, 204, 0.4); }
        .btn-secondary { background: var(--color-glass-bg); color: var(--color-text-primary); border: 1px solid var(--color-glass-border); }
        .btn-secondary:hover { background: white; }
        .btn svg { width: 18px; height: 18px; fill: currentColor; }
        .tabs-container { margin-bottom: 32px; animation: fadeInUp 0.6s ease-out 0.1s backwards; }
        .tabs { display: flex; gap: 4px; background: var(--color-glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--color-glass-border); border-radius: 16px; padding: 6px; overflow-x: auto; }
        .tab { padding: 12px 20px; border: none; background: transparent; border-radius: 12px; font-family: var(--font-body); font-size: 0.875rem; font-weight: 500; color: var(--color-text-muted); cursor: pointer; transition: all 0.3s ease; white-space: nowrap; }
        .tab:hover { color: var(--color-text-primary); }
        .tab.active { background: white; color: var(--color-text-primary); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); }
        .tab-content { display: none; animation: fadeIn 0.4s ease-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
        .content-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        .card { background: var(--color-glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--color-glass-border); border-radius: 20px; padding: 24px; box-shadow: 0 4px 24px var(--color-glass-shadow); animation: fadeInUp 0.6s ease-out backwards; }
        .card.full-width { grid-column: 1 / -1; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .card-title { font-family: var(--font-display); font-size: 1.125rem; color: var(--color-text-primary); }
        .card-subtitle { font-size: 0.8125rem; color: var(--color-text-muted); margin-top: 2px; }
        .card-badge { padding: 4px 10px; background: rgba(16, 185, 129, 0.15); color: var(--color-accent-green); border-radius: 6px; font-size: 0.75rem; font-weight: 600; }
        .card-badge.warning { background: rgba(245, 158, 11, 0.15); color: var(--color-accent-orange); }
        .card-badge.danger { background: rgba(239, 68, 68, 0.15); color: var(--color-accent-red); }
        .chart-container { position: relative; height: 280px; }
        .chart-container.large { height: 350px; }
        .progress-section { margin-bottom: 24px; }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .progress-label { font-size: 0.875rem; color: var(--color-text-secondary); }
        .progress-value { font-size: 0.875rem; font-weight: 600; color: var(--color-text-primary); }
        .progress-bar { height: 8px; background: rgba(0, 0, 0, 0.06); border-radius: 100px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 100px; background: linear-gradient(90deg, var(--color-accent-blue), var(--color-accent-teal)); transition: width 1s ease-out; }
        .progress-fill.warning { background: linear-gradient(90deg, var(--color-accent-orange), #fbbf24); }
        .progress-fill.success { background: linear-gradient(90deg, var(--color-accent-green), #34d399); }
        .matrix-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-top: 16px; }
        .matrix-cell { aspect-ratio: 1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; color: white; transition: transform 0.2s ease; }
        .matrix-cell:hover { transform: scale(1.1); }
        .matrix-label { font-size: 0.6875rem; color: var(--color-text-muted); text-align: center; padding: 4px; }
        .gallery-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .gallery-item { aspect-ratio: 1; background: linear-gradient(135deg, #1a1f36, #2d3748); border-radius: 12px; position: relative; overflow: hidden; cursor: pointer; transition: transform 0.3s ease; }
        .gallery-item:hover { transform: scale(1.05); }
        .gallery-item::after { content: attr(data-label); position: absolute; bottom: 0; left: 0; right: 0; padding: 8px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; font-size: 0.6875rem; text-align: center; }
        
        /* Realistic X-ray overlays */
        .xray-overlay { position: absolute; top: 10%; left: 15%; right: 15%; bottom: 20%; border-radius: 40% 40% 35% 35%; background: radial-gradient(ellipse at 50% 30%, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 40%, transparent 70%); box-shadow: inset 0 0 30px rgba(255,255,255,0.05), inset -10px 0 20px rgba(0,0,0,0.3), inset 10px 0 20px rgba(0,0,0,0.3); }
        .xray-overlay::before { content: ''; position: absolute; top: 20%; left: 25%; right: 25%; height: 25%; background: linear-gradient(180deg, rgba(60,60,60,0.4) 0%, rgba(40,40,40,0.2) 100%); border-radius: 0 0 50% 50%; }
        .xray-overlay::after { content: ''; position: absolute; top: 50%; left: 10%; right: 10%; height: 40%; background: repeating-linear-gradient(0deg, transparent 0px, transparent 8px, rgba(80,80,80,0.15) 8px, rgba(80,80,80,0.15) 10px); border-radius: 10px; }
        .xray-overlay.small { top: 20%; left: 20%; right: 20%; bottom: 25%; }
        .xray-overlay.noisy { filter: contrast(1.1); background: radial-gradient(ellipse at 50% 30%, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.04) 40%, transparent 70%); }
        .xray-overlay.dense { opacity: 0.5; }
        .xray-overlay.rotated { transform: rotate(-8deg); }
        .xray-overlay.dual::before { box-shadow: 15px 10px 15px rgba(200,200,200,0.15), -15px 10px 15px rgba(200,200,200,0.15); }
        .foreign-object { position: absolute; top: 35%; left: 60%; width: 15px; height: 15px; background: rgba(255,255,255,0.7); border-radius: 2px; transform: rotate(45deg); box-shadow: 0 0 10px rgba(255,255,255,0.5); }
        .checklist { display: flex; flex-direction: column; gap: 12px; }
        .checklist-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: rgba(0, 0, 0, 0.02); border-radius: 12px; transition: background 0.2s ease; }
        .checklist-item:hover { background: rgba(0, 0, 0, 0.04); }
        .checklist-icon { width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .checklist-icon.complete { background: var(--color-accent-green); }
        .checklist-icon.pending { background: var(--color-accent-orange); }
        .checklist-icon svg { width: 14px; height: 14px; fill: white; }
        .checklist-text { flex: 1; font-size: 0.875rem; color: var(--color-text-secondary); }
        .checklist-status { font-size: 0.75rem; font-weight: 500; color: var(--color-text-muted); }
        .subgroup-list { display: flex; flex-direction: column; gap: 8px; margin-top: 16px; }
        .subgroup-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; background: rgba(0, 0, 0, 0.02); border-radius: 10px; font-size: 0.8125rem; }
        .subgroup-item.alert { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); }
        .subgroup-name { color: var(--color-text-secondary); }
        .subgroup-value { font-weight: 600; color: var(--color-text-primary); }
        .subgroup-item.alert .subgroup-value { color: var(--color-accent-red); }
        .version-table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
        .version-table th { text-align: left; padding: 12px; font-weight: 500; color: var(--color-text-muted); border-bottom: 1px solid rgba(0, 0, 0, 0.06); }
        .version-table td { padding: 12px; border-bottom: 1px solid rgba(0, 0, 0, 0.04); }
        .version-table tr:last-child td { border-bottom: none; }
        .diff-badge { padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .diff-badge.improved { background: rgba(16, 185, 129, 0.15); color: var(--color-accent-green); }
        .diff-badge.regressed { background: rgba(239, 68, 68, 0.15); color: var(--color-accent-red); }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal { background: white; border-radius: 24px; padding: 32px; max-width: 500px; width: 90%; transform: scale(0.9) translateY(20px); transition: transform 0.3s ease; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }
        .modal-overlay.active .modal { transform: scale(1) translateY(0); }
        .modal-header { text-align: center; margin-bottom: 24px; }
        .modal-icon { width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-teal)); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .modal-icon svg { width: 32px; height: 32px; fill: white; }
        .modal-title { font-family: var(--font-display); font-size: 1.5rem; margin-bottom: 8px; }
        .modal-subtitle { color: var(--color-text-muted); font-size: 0.9375rem; }
        .modal-actions { display: flex; gap: 12px; }
        .modal-actions .btn { flex: 1; justify-content: center; }
        
        /* Checkbox styles */
        .checkbox-list { display: flex; flex-direction: column; gap: 12px; margin-bottom: 24px; }
        .checkbox-item { display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: var(--color-bg); border-radius: 12px; cursor: pointer; transition: all 0.2s ease; }
        .checkbox-item:hover { background: rgba(0, 102, 204, 0.05); }
        .checkbox-item input { display: none; }
        .checkbox-custom { width: 22px; height: 22px; border: 2px solid rgba(0, 0, 0, 0.2); border-radius: 6px; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; flex-shrink: 0; }
        .checkbox-item input:checked + .checkbox-custom { background: var(--color-accent-green); border-color: var(--color-accent-green); }
        .checkbox-item input:checked + .checkbox-custom::after { content: '✓'; color: white; font-size: 14px; font-weight: bold; }
        .checkbox-label { font-size: 0.875rem; color: var(--color-text-secondary); }
        .checkbox-item input:checked ~ .checkbox-label { color: var(--color-text-primary); }
        
        /* Signature section */
        .signature-section { margin-bottom: 24px; }
        .signature-info { background: var(--color-bg); border-radius: 12px; padding: 16px; margin-bottom: 16px; }
        .signature-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(0,0,0,0.06); }
        .signature-row:last-child { border-bottom: none; }
        .signature-label { font-size: 0.8125rem; color: var(--color-text-muted); }
        .signature-value { font-size: 0.875rem; font-weight: 500; color: var(--color-text-primary); }
        .signature-box { margin-bottom: 16px; }
        .signature-input-label { display: block; font-size: 0.8125rem; color: var(--color-text-muted); margin-bottom: 8px; }
        .signature-input { width: 100%; padding: 14px 16px; border: 2px solid rgba(0,0,0,0.1); border-radius: 12px; font-family: 'Instrument Serif', serif; font-size: 1.25rem; font-style: italic; transition: all 0.2s ease; }
        .signature-input:focus { outline: none; border-color: var(--color-accent-blue); box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.1); }
        .signature-input::placeholder { color: rgba(0,0,0,0.2); }
        
        /* Success modal */
        .success-modal { text-align: center; }
        .success-animation { position: relative; width: 120px; height: 120px; margin: 0 auto 24px; }
        .success-circle { width: 100px; height: 100px; background: linear-gradient(135deg, var(--color-accent-green), #34d399); border-radius: 50%; display: flex; align-items: center; justify-content: center; position: absolute; top: 10px; left: 10px; animation: scaleIn 0.5s ease-out; box-shadow: 0 8px 32px rgba(16, 185, 129, 0.4); }
        .success-check { width: 50px; height: 50px; fill: white; animation: checkDraw 0.4s ease-out 0.3s backwards; }
        .success-rings { position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 3px solid var(--color-accent-green); border-radius: 50%; animation: ringPulse 1s ease-out; opacity: 0; }
        .success-title { color: var(--color-accent-green); margin-bottom: 8px; }
        .success-details { background: var(--color-bg); border-radius: 12px; padding: 16px; margin: 24px 0; text-align: left; }
        .success-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(0,0,0,0.06); }
        .success-row:last-child { border-bottom: none; }
        .success-label { font-size: 0.8125rem; color: var(--color-text-muted); }
        .success-value { font-size: 0.875rem; font-weight: 500; color: var(--color-text-primary); }
        .success-status { color: var(--color-accent-orange); background: rgba(245, 158, 11, 0.15); padding: 2px 10px; border-radius: 6px; font-size: 0.75rem; }
        
        @keyframes scaleIn { 0% { transform: scale(0); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes checkDraw { 0% { opacity: 0; transform: scale(0); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes ringPulse { 0% { transform: scale(0.8); opacity: 1; } 100% { transform: scale(1.5); opacity: 0; } }
        @media (max-width: 1024px) { .content-grid { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .navbar { padding: 12px 20px; } .main { padding: 24px 20px; } .model-header { flex-direction: column; gap: 20px; } .model-actions { width: 100%; } .model-actions .btn { flex: 1; justify-content: center; } .gallery-grid { grid-template-columns: repeat(2, 1fr); } }
        
        /* Dark mode toggle */
        .theme-toggle { width: 36px; height: 36px; background: transparent; border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; }
        .theme-toggle:hover { background: rgba(0,0,0,0.05); }
        .theme-toggle svg { width: 20px; height: 20px; fill: var(--color-text-muted); transition: all 0.3s ease; }
        .theme-toggle .moon-icon { display: none; }
        body.dark-mode .theme-toggle .sun-icon { display: none; }
        body.dark-mode .theme-toggle .moon-icon { display: block; }
        
        /* Notification bell */
        .nav-notifications { position: relative; }
        .nav-user { display: flex; align-items: center; gap: 8px; }
        .notification-bell { width: 36px; height: 36px; background: transparent; border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; position: relative; }
        .notification-bell:hover { background: rgba(0,0,0,0.05); }
        .notification-bell svg { width: 20px; height: 20px; fill: var(--color-text-muted); }
        .notification-badge { position: absolute; top: 4px; right: 4px; width: 16px; height: 16px; background: var(--color-accent-red); color: white; font-size: 0.625rem; font-weight: 600; border-radius: 50%; display: flex; align-items: center; justify-content: center; animation: notifPulse 2s infinite; }
        @keyframes notifPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .notification-dropdown { position: absolute; top: 100%; right: 0; width: 360px; background: white; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.3s ease; z-index: 1000; margin-top: 8px; overflow: hidden; }
        .notification-dropdown.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .notification-header { padding: 16px 20px; border-bottom: 1px solid rgba(0,0,0,0.06); display: flex; justify-content: space-between; align-items: center; }
        .notification-title { font-weight: 600; font-size: 0.9375rem; }
        .notification-clear { font-size: 0.75rem; color: var(--color-accent-blue); cursor: pointer; }
        .notification-list { max-height: 320px; overflow-y: auto; }
        .notification-item { padding: 14px 20px; border-bottom: 1px solid rgba(0,0,0,0.04); display: flex; gap: 12px; cursor: pointer; transition: background 0.2s; }
        .notification-item:hover { background: rgba(0,0,0,0.02); }
        .notification-item.unread { background: rgba(0, 102, 204, 0.04); }
        .notification-icon { width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .notification-icon.alert { background: rgba(239, 68, 68, 0.15); }
        .notification-icon.alert svg { fill: var(--color-accent-red); }
        .notification-icon.warning { background: rgba(245, 158, 11, 0.15); }
        .notification-icon.warning svg { fill: var(--color-accent-orange); }
        .notification-icon.success { background: rgba(16, 185, 129, 0.15); }
        .notification-icon.success svg { fill: var(--color-accent-green); }
        .notification-icon.info { background: rgba(0, 102, 204, 0.15); }
        .notification-icon.info svg { fill: var(--color-accent-blue); }
        .notification-icon svg { width: 18px; height: 18px; }
        .notification-content { flex: 1; min-width: 0; }
        .notification-text { font-size: 0.8125rem; color: var(--color-text-primary); margin-bottom: 2px; }
        .notification-text strong { font-weight: 600; }
        .notification-time { font-size: 0.6875rem; color: var(--color-text-muted); }
        .notification-footer { padding: 12px 20px; text-align: center; border-top: 1px solid rgba(0,0,0,0.06); }
        .notification-footer a { font-size: 0.8125rem; color: var(--color-accent-blue); text-decoration: none; }
        
        /* FDA Countdown */
        .fda-countdown { display: flex; align-items: center; gap: 16px; padding: 16px 20px; background: linear-gradient(135deg, rgba(0, 102, 204, 0.08), rgba(13, 148, 136, 0.08)); border-radius: 12px; margin-bottom: 20px; }
        .countdown-icon { width: 44px; height: 44px; background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-teal)); border-radius: 12px; display: flex; align-items: center; justify-content: center; }
        .countdown-icon svg { width: 24px; height: 24px; fill: white; }
        .countdown-content { flex: 1; }
        .countdown-label { font-size: 0.75rem; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 2px; }
        .countdown-value { font-family: var(--font-display); font-size: 1.25rem; color: var(--color-text-primary); }
        .countdown-value span { color: var(--color-accent-blue); font-weight: 600; }
        .countdown-progress { width: 200px; }
        .countdown-bar { height: 6px; background: rgba(0,0,0,0.1); border-radius: 3px; overflow: hidden; }
        .countdown-fill { height: 100%; background: linear-gradient(90deg, var(--color-accent-blue), var(--color-accent-teal)); border-radius: 3px; transition: width 1s ease; }
        .countdown-percent { font-size: 0.75rem; color: var(--color-text-muted); text-align: right; margin-top: 4px; }
        
        /* Threshold Slider */
        .threshold-slider-container { padding: 8px 0; }
        .threshold-display { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .threshold-metric { text-align: center; flex: 1; }
        .threshold-label { display: block; font-size: 0.75rem; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px; }
        .threshold-value { font-size: 1.5rem; font-weight: 600; color: var(--color-text-primary); }
        .threshold-value.good { color: var(--color-accent-green); }
        .threshold-value.warning { color: var(--color-accent-orange); }
        .slider-wrapper { margin-bottom: 16px; }
        .threshold-slider { width: 100%; height: 8px; -webkit-appearance: none; appearance: none; background: linear-gradient(90deg, var(--color-accent-green) 0%, var(--color-accent-orange) 50%, var(--color-accent-red) 100%); border-radius: 4px; outline: none; cursor: pointer; }
        .threshold-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: white; border: 3px solid var(--color-accent-blue); border-radius: 50%; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: transform 0.2s; }
        .threshold-slider::-webkit-slider-thumb:hover { transform: scale(1.1); }
        .threshold-slider::-moz-range-thumb { width: 24px; height: 24px; background: white; border: 3px solid var(--color-accent-blue); border-radius: 50%; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        .slider-labels { display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.6875rem; color: var(--color-text-muted); }
        .threshold-recommendation { display: flex; align-items: center; gap: 8px; padding: 10px 14px; background: rgba(16, 185, 129, 0.1); border-radius: 8px; font-size: 0.8125rem; color: var(--color-text-secondary); }
        .threshold-recommendation strong { color: var(--color-accent-green); }
        
        /* Dark mode styles */
        body.dark-mode { --color-bg: #0f1219; --color-bg-gradient-1: #1a1f2e; --color-bg-gradient-2: #1f1a2e; --color-text-primary: #f1f5f9; --color-text-secondary: #94a3b8; --color-text-muted: #64748b; --color-glass-bg: rgba(30, 41, 59, 0.8); --color-glass-border: rgba(51, 65, 85, 0.5); --color-glass-shadow: rgba(0, 0, 0, 0.3); }
        body.dark-mode .notification-dropdown { background: #1e293b; }
        body.dark-mode .notification-item:hover { background: rgba(255,255,255,0.05); }
        body.dark-mode .notification-item.unread { background: rgba(0, 102, 204, 0.15); }
        body.dark-mode .notification-header { border-color: rgba(255,255,255,0.1); }
        body.dark-mode .modal { background: #1e293b; }
        body.dark-mode .signature-input { background: #0f172a; border-color: rgba(255,255,255,0.1); color: var(--color-text-primary); }
        body.dark-mode .checkbox-item { background: #0f172a; }
        body.dark-mode .theme-toggle:hover { background: rgba(255,255,255,0.1); }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>
    <nav class="navbar">
        <a href="index.html" class="nav-logo">
            <div class="nav-logo-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/></svg></div>
            <span class="nav-logo-text">EvalScale</span>
        </a>
        <div class="nav-breadcrumb">
            <a href="index.html">Home</a>
            <svg viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
            <a href="model-registry.html">Model Registry</a>
            <svg viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
            <span>ChestXR-Detect</span>
        </div>
        <div class="nav-user">
            <button class="theme-toggle" onclick="toggleDarkMode()" title="Toggle dark mode"><svg viewBox="0 0 24 24" class="sun-icon"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/></svg><svg viewBox="0 0 24 24" class="moon-icon"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg></button>
            <div class="nav-notifications">
                <button class="notification-bell" onclick="toggleNotifications()"><svg viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg><span class="notification-badge">3</span></button>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header"><span class="notification-title">Notifications</span><span class="notification-clear" onclick="clearNotifications()">Mark all read</span></div>
                    <div class="notification-list">
                        <div class="notification-item unread"><div class="notification-icon alert"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg></div><div class="notification-content"><div class="notification-text"><strong>Drift Alert:</strong> Mayo Clinic AUC dropped below 0.86</div><div class="notification-time">2 minutes ago</div></div></div>
                        <div class="notification-item unread"><div class="notification-icon warning"><svg viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg></div><div class="notification-content"><div class="notification-text"><strong>Bias Warning:</strong> Pacific Islander subgroup at 0.82</div><div class="notification-time">1 hour ago</div></div></div>
                        <div class="notification-item unread"><div class="notification-icon success"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><div class="notification-content"><div class="notification-text"><strong>Shadow Test Complete:</strong> v4.3.0-rc1 ready for review</div><div class="notification-time">3 hours ago</div></div></div>
                        <div class="notification-item"><div class="notification-icon info"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg></div><div class="notification-content"><div class="notification-text"><strong>SBOM Scan:</strong> All dependencies up to date</div><div class="notification-time">Yesterday</div></div></div>
                    </div>
                    <div class="notification-footer"><a href="#">View all notifications</a></div>
                </div>
            </div>
            <div class="nav-user-avatar">MD</div>
        </div>
    </nav>
    <main class="main">
        <header class="model-header">
            <div class="model-title-section">
                <div class="model-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/></svg></div>
                <div>
                    <h1 class="model-title">ChestXR-Detect</h1>
                    <div class="model-meta">
                        <span class="model-version-tag">v2.4.1</span>
                        <span>Chest X-Ray Pneumonia Detection</span>
                        <span class="model-status">In Review</span>
                    </div>
                </div>
            </div>
            <div class="model-actions">
                <button class="btn btn-secondary"><svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>Export Report</button>
                <button class="btn btn-primary" onclick="openModal()"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Mock FDA Submit</button>
            </div>
        </header>
        <div class="tabs-container">
            <div class="tabs">
                <button class="tab active" data-tab="hospital">Hospital Performance</button>
                <button class="tab" data-tab="compliance">Compliance Readiness</button>
                <button class="tab" data-tab="bias">Bias & Equity</button>
                <button class="tab" data-tab="site">Site Performance</button>
                <button class="tab" data-tab="version">Version Comparison</button>
            </div>
        </div>

        <!-- FDA Submission Countdown -->
        <div class="fda-countdown">
            <div class="countdown-icon"><svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg></div>
            <div class="countdown-content">
                <div class="countdown-label">Estimated Time to FDA Submission</div>
                <div class="countdown-value"><span>47 days</span> remaining (target: March 1, 2026)</div>
            </div>
            <div class="countdown-progress">
                <div class="countdown-bar"><div class="countdown-fill" style="width: 87%;"></div></div>
                <div class="countdown-percent">87% documentation complete</div>
            </div>
        </div>

        <!-- Tab 1: Hospital Performance -->
        <div class="tab-content active" id="hospital">
            <div class="content-grid">
                <div class="card full-width">
                    <div class="card-header">
                        <div><h3 class="card-title">Multi-Site ROC-AUC Comparison</h3><p class="card-subtitle">Performance across 5 validation hospitals</p></div>
                        <span class="card-badge">Mean AUC: 0.912</span>
                    </div>
                    <div class="chart-container large"><canvas id="rocChart"></canvas></div>
                </div>
                
                <!-- Interactive Threshold Slider -->
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Threshold Optimizer</h3><p class="card-subtitle">Adjust classification threshold to see sensitivity/specificity tradeoff</p></div></div>
                    <div class="threshold-slider-container">
                        <div class="threshold-display">
                            <div class="threshold-metric"><span class="threshold-label">Threshold</span><span class="threshold-value" id="thresholdValue">0.50</span></div>
                            <div class="threshold-metric"><span class="threshold-label">Sensitivity</span><span class="threshold-value good" id="sensitivityValue">0.891</span></div>
                            <div class="threshold-metric"><span class="threshold-label">Specificity</span><span class="threshold-value" id="specificityValue">0.934</span></div>
                        </div>
                        <div class="slider-wrapper">
                            <input type="range" min="0" max="100" value="50" class="threshold-slider" id="thresholdSlider" oninput="updateThreshold(this.value)">
                            <div class="slider-labels"><span>0.0</span><span>0.25</span><span>0.50</span><span>0.75</span><span>1.0</span></div>
                        </div>
                        <div class="threshold-recommendation">
                            <svg viewBox="0 0 24 24" width="16" height="16"><path fill="#10b981" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                            <span>Recommended: <strong>0.45-0.55</strong> for balanced performance</span>
                        </div>
                    </div>
                </div>
                    <div class="card-header"><div><h3 class="card-title">Scanner Variability Matrix</h3><p class="card-subtitle">AUC by scanner manufacturer</p></div></div>
                    <div class="matrix-grid">
                        <div class="matrix-label"></div><div class="matrix-label">Site A</div><div class="matrix-label">Site B</div><div class="matrix-label">Site C</div><div class="matrix-label">Site D</div>
                        <div class="matrix-label">GE</div><div class="matrix-cell" style="background:#10b981;">0.94</div><div class="matrix-cell" style="background:#10b981;">0.92</div><div class="matrix-cell" style="background:#0d9488;">0.89</div><div class="matrix-cell" style="background:#10b981;">0.91</div>
                        <div class="matrix-label">Siemens</div><div class="matrix-cell" style="background:#10b981;">0.93</div><div class="matrix-cell" style="background:#10b981;">0.91</div><div class="matrix-cell" style="background:#10b981;">0.92</div><div class="matrix-cell" style="background:#0d9488;">0.88</div>
                        <div class="matrix-label">Philips</div><div class="matrix-cell" style="background:#0d9488;">0.89</div><div class="matrix-cell" style="background:#0d9488;">0.87</div><div class="matrix-cell" style="background:#10b981;">0.90</div><div class="matrix-cell" style="background:#f59e0b;">0.85</div>
                        <div class="matrix-label">Canon</div><div class="matrix-cell" style="background:#0d9488;">0.88</div><div class="matrix-cell" style="background:#10b981;">0.90</div><div class="matrix-cell" style="background:#0d9488;">0.87</div><div class="matrix-cell" style="background:#0d9488;">0.89</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Edge-Case Gallery</h3><p class="card-subtitle">Challenging cases for review</p></div><span class="card-badge warning">8 Cases</span></div>
                    <div class="gallery-grid" style="grid-template-columns: repeat(4, 1fr);">
                        <div class="gallery-item" data-label="Low contrast" style="background: radial-gradient(ellipse at 50% 40%, #3a3a3a 0%, #1a1a1a 50%, #0a0a0a 100%);"><div class="xray-overlay"></div></div>
                        <div class="gallery-item" data-label="Motion blur" style="background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 50%, #0f0f0f 100%); filter: blur(0.5px);"><div class="xray-overlay" style="opacity: 0.6;"></div></div>
                        <div class="gallery-item" data-label="Pediatric" style="background: radial-gradient(ellipse at 50% 35%, #4a4a4a 0%, #2a2a2a 40%, #0a0a0a 100%);"><div class="xray-overlay small"></div></div>
                        <div class="gallery-item" data-label="Portable XR" style="background: linear-gradient(180deg, #1a1a1a 0%, #2a2a2a 30%, #1a1a1a 100%);"><div class="xray-overlay noisy"></div></div>
                        <div class="gallery-item" data-label="Obese patient" style="background: radial-gradient(ellipse at 50% 45%, #2a2a2a 0%, #151515 60%, #0a0a0a 100%);"><div class="xray-overlay dense"></div></div>
                        <div class="gallery-item" data-label="Rotated view" style="background: radial-gradient(ellipse at 40% 50%, #3a3a3a 0%, #1a1a1a 50%, #0a0a0a 100%); transform: rotate(0deg);"><div class="xray-overlay rotated"></div></div>
                        <div class="gallery-item" data-label="Foreign object" style="background: radial-gradient(ellipse at 50% 40%, #3a3a3a 0%, #1a1a1a 50%, #0a0a0a 100%);"><div class="xray-overlay"><div class="foreign-object"></div></div></div>
                        <div class="gallery-item" data-label="Dual pathology" style="background: radial-gradient(ellipse at 50% 40%, #3a3a3a 0%, #1a1a1a 50%, #0a0a0a 100%);"><div class="xray-overlay dual"></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Compliance Readiness -->
        <div class="tab-content" id="compliance">
            <div class="content-grid">
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">FDA Submission Readiness</h3><p class="card-subtitle">510(k) documentation progress</p></div><span class="card-badge">87% Complete</span></div>
                    <div class="progress-section"><div class="progress-header"><span class="progress-label">Clinical Evidence</span><span class="progress-value">100%</span></div><div class="progress-bar"><div class="progress-fill success" style="width:100%;"></div></div></div>
                    <div class="progress-section"><div class="progress-header"><span class="progress-label">Performance Testing</span><span class="progress-value">95%</span></div><div class="progress-bar"><div class="progress-fill success" style="width:95%;"></div></div></div>
                    <div class="progress-section"><div class="progress-header"><span class="progress-label">Software Documentation</span><span class="progress-value">78%</span></div><div class="progress-bar"><div class="progress-fill warning" style="width:78%;"></div></div></div>
                    <div class="progress-section"><div class="progress-header"><span class="progress-label">Labeling & IFU</span><span class="progress-value">82%</span></div><div class="progress-bar"><div class="progress-fill warning" style="width:82%;"></div></div></div>
                </div>
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">SBOM Auto-Scanner</h3><p class="card-subtitle">Software Bill of Materials</p></div><span class="card-badge">Last scan: 2h ago</span></div>
                    <div class="checklist">
                        <div class="checklist-item"><div class="checklist-icon complete"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><span class="checklist-text">PyTorch 2.1.0</span><span class="checklist-status">No CVEs</span></div>
                        <div class="checklist-item"><div class="checklist-icon complete"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><span class="checklist-text">NumPy 1.24.3</span><span class="checklist-status">No CVEs</span></div>
                        <div class="checklist-item"><div class="checklist-icon pending"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg></div><span class="checklist-text">OpenCV 4.8.0</span><span class="checklist-status">1 Low CVE</span></div>
                        <div class="checklist-item"><div class="checklist-icon complete"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><span class="checklist-text">ONNX Runtime 1.16</span><span class="checklist-status">No CVEs</span></div>
                    </div>
                </div>
                <div class="card full-width">
                    <div class="card-header"><div><h3 class="card-title">Algorithm Change Protocol Tracker</h3><p class="card-subtitle">Version history and change documentation</p></div></div>
                    <div class="chart-container"><canvas id="acpChart"></canvas></div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Bias & Equity -->
        <div class="tab-content" id="bias">
            <div class="content-grid">
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Demographic Sensitivity Analysis</h3><p class="card-subtitle">Sensitivity across subgroups</p></div></div>
                    <div class="chart-container"><canvas id="biasRadar"></canvas></div>
                </div>
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Subgroup Performance</h3><p class="card-subtitle">Groups below 0.85 threshold highlighted</p></div><span class="card-badge danger">1 Alert</span></div>
                    <div class="subgroup-list">
                        <div class="subgroup-item"><span class="subgroup-name">Age: 18-40</span><span class="subgroup-value">0.93</span></div>
                        <div class="subgroup-item"><span class="subgroup-name">Age: 41-65</span><span class="subgroup-value">0.91</span></div>
                        <div class="subgroup-item"><span class="subgroup-name">Age: 65+</span><span class="subgroup-value">0.88</span></div>
                        <div class="subgroup-item"><span class="subgroup-name">Gender: Male</span><span class="subgroup-value">0.92</span></div>
                        <div class="subgroup-item"><span class="subgroup-name">Gender: Female</span><span class="subgroup-value">0.90</span></div>
                        <div class="subgroup-item alert"><span class="subgroup-name">Ethnicity: Pacific Islander</span><span class="subgroup-value">0.82 ⚠️</span></div>
                    </div>
                </div>
                <div class="card full-width">
                    <div class="card-header"><div><h3 class="card-title">Statistical Significance Analysis</h3><p class="card-subtitle">P-values for demographic parity tests</p></div></div>
                    <div class="chart-container"><canvas id="pvalueChart"></canvas></div>
                </div>
            </div>
        </div>

        <!-- Tab 4: Site Performance -->
        <div class="tab-content" id="site">
            <div class="content-grid">
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Site Consistency Parameters</h3><p class="card-subtitle">Cross-site performance variance</p></div></div>
                    <div class="chart-container"><canvas id="siteConsistency"></canvas></div>
                </div>
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Latency vs. Accuracy Trade-off</h3><p class="card-subtitle">Inference time impact on performance</p></div></div>
                    <div class="chart-container"><canvas id="latencyAccuracy"></canvas></div>
                </div>
                <div class="card full-width">
                    <div class="card-header"><div><h3 class="card-title">Site-Specific Drift Alerts</h3><p class="card-subtitle">Real-time monitoring across deployment sites</p></div><span class="card-badge warning">2 Warnings</span></div>
                    <div class="chart-container"><canvas id="driftAlerts"></canvas></div>
                </div>
            </div>
        </div>

        <!-- Tab 5: Version Comparison -->
        <div class="tab-content" id="version">
            <div class="content-grid">
                <div class="card full-width">
                    <div class="card-header"><div><h3 class="card-title">Version Performance Regression</h3><p class="card-subtitle">AUC trends across model iterations</p></div></div>
                    <div class="chart-container large"><canvas id="versionChart"></canvas></div>
                </div>
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Model Diff Viewer</h3><p class="card-subtitle">v2.3.0 → v2.4.1 changes</p></div></div>
                    <table class="version-table">
                        <thead><tr><th>Metric</th><th>v2.3.0</th><th>v2.4.1</th><th>Change</th></tr></thead>
                        <tbody>
                            <tr><td>AUC-ROC</td><td>0.897</td><td>0.912</td><td><span class="diff-badge improved">+1.7%</span></td></tr>
                            <tr><td>Sensitivity</td><td>0.884</td><td>0.901</td><td><span class="diff-badge improved">+1.9%</span></td></tr>
                            <tr><td>Specificity</td><td>0.912</td><td>0.908</td><td><span class="diff-badge regressed">-0.4%</span></td></tr>
                            <tr><td>Inference Time</td><td>245ms</td><td>198ms</td><td><span class="diff-badge improved">-19%</span></td></tr>
                            <tr><td>Model Size</td><td>142MB</td><td>138MB</td><td><span class="diff-badge improved">-2.8%</span></td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="card">
                    <div class="card-header"><div><h3 class="card-title">Regression Red-Zone</h3><p class="card-subtitle">Metrics that degraded</p></div><span class="card-badge danger">1 Issue</span></div>
                    <div class="checklist">
                        <div class="checklist-item"><div class="checklist-icon pending"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg></div><span class="checklist-text">Specificity dropped 0.4% on elderly cohort</span><span class="checklist-status">Review needed</span></div>
                        <div class="checklist-item"><div class="checklist-icon complete"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><span class="checklist-text">All other metrics improved or stable</span><span class="checklist-status">Passed</span></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FDA Submit Modal - Step 1: Evidence Assembly -->
    <div class="modal-overlay" id="fdaModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-icon"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 9h-2v2H9v-2H7V9h2V7h2v2h2v2zm-1-8l5 5h-5V3z"/></svg></div>
                <h2 class="modal-title">Evidence Assembly</h2>
                <p class="modal-subtitle">Verify all required documents are included</p>
            </div>
            <div class="checkbox-list">
                <label class="checkbox-item"><input type="checkbox" id="check1" onchange="updateSubmitButton()"><span class="checkbox-custom"></span><span class="checkbox-label">Clinical validation study results (n=12,847 patients)</span></label>
                <label class="checkbox-item"><input type="checkbox" id="check2" onchange="updateSubmitButton()"><span class="checkbox-custom"></span><span class="checkbox-label">Software documentation and architecture specs</span></label>
                <label class="checkbox-item"><input type="checkbox" id="check3" onchange="updateSubmitButton()"><span class="checkbox-custom"></span><span class="checkbox-label">Risk analysis and mitigation report</span></label>
                <label class="checkbox-item"><input type="checkbox" id="check4" onchange="updateSubmitButton()"><span class="checkbox-custom"></span><span class="checkbox-label">Labeling and Instructions for Use (IFU)</span></label>
                <label class="checkbox-item"><input type="checkbox" id="check5" onchange="updateSubmitButton()"><span class="checkbox-custom"></span><span class="checkbox-label">Cybersecurity documentation</span></label>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" id="step1Next" disabled onclick="showStep2()"><svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>Continue</button>
            </div>
        </div>
    </div>

    <!-- FDA Submit Modal - Step 2: Digital Signature -->
    <div class="modal-overlay" id="fdaModal2">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-icon" style="background: linear-gradient(135deg, #7c3aed, #a855f7);"><svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg></div>
                <h2 class="modal-title">21 CFR Part 11 Attestation</h2>
                <p class="modal-subtitle">Digital signature required for regulatory compliance</p>
            </div>
            <div class="signature-section">
                <div class="signature-info">
                    <div class="signature-row"><span class="signature-label">Signatory</span><span class="signature-value">Dr. Michael Chen, MD</span></div>
                    <div class="signature-row"><span class="signature-label">Role</span><span class="signature-value">Chief Medical Officer</span></div>
                    <div class="signature-row"><span class="signature-label">Timestamp</span><span class="signature-value" id="signatureTime">--</span></div>
                </div>
                <div class="signature-box">
                    <label class="signature-input-label">Type your full legal name to sign:</label>
                    <input type="text" id="signatureInput" class="signature-input" placeholder="Dr. Michael Chen" oninput="updateSignButton()">
                </div>
                <label class="checkbox-item"><input type="checkbox" id="attestCheck" onchange="updateSignButton()"><span class="checkbox-custom"></span><span class="checkbox-label">I attest that all information is accurate and complete to the best of my knowledge</span></label>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal2()">Back</button>
                <button class="btn btn-primary" id="signButton" disabled onclick="submitFDA()"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Sign & Submit</button>
            </div>
        </div>
    </div>

    <!-- FDA Submit Modal - Step 3: Success Confirmation -->
    <div class="modal-overlay" id="fdaModal3">
        <div class="modal success-modal">
            <div class="success-animation">
                <div class="success-circle">
                    <svg class="success-check" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                </div>
                <div class="success-rings"></div>
            </div>
            <h2 class="modal-title success-title">Submission Complete!</h2>
            <p class="modal-subtitle">Your 510(k) mock submission has been encrypted and transmitted</p>
            <div class="success-details">
                <div class="success-row"><span class="success-label">Submission ID</span><span class="success-value">#FDA-2024-MCK-78421</span></div>
                <div class="success-row"><span class="success-label">Submitted</span><span class="success-value" id="submitTime">--</span></div>
                <div class="success-row"><span class="success-label">Status</span><span class="success-value success-status">Pending Review</span></div>
            </div>
            <div class="modal-actions" style="justify-content: center;">
                <button class="btn btn-primary" onclick="closeAllModals()"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Done</button>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
                initChartsForTab(tab.dataset.tab);
            });
        });

        // Notification dropdown
        function toggleNotifications() {
            document.getElementById('notificationDropdown').classList.toggle('active');
        }
        function clearNotifications() {
            document.querySelectorAll('.notification-item.unread').forEach(item => item.classList.remove('unread'));
            document.querySelector('.notification-badge').style.display = 'none';
        }
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-notifications')) {
                document.getElementById('notificationDropdown').classList.remove('active');
            }
        });

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
            // Reinitialize charts for current tab to update colors
            const activeTab = document.querySelector('.tab.active');
            if (activeTab) initChartsForTab(activeTab.dataset.tab);
        }
        // Check saved preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }

        // Interactive threshold slider
        function updateThreshold(value) {
            const threshold = value / 100;
            document.getElementById('thresholdValue').textContent = threshold.toFixed(2);
            
            // Simulate sensitivity/specificity tradeoff
            // At low threshold: high sensitivity, low specificity
            // At high threshold: low sensitivity, high specificity
            const sensitivity = 0.99 - (threshold * 0.25) + (Math.random() * 0.02 - 0.01);
            const specificity = 0.75 + (threshold * 0.22) + (Math.random() * 0.02 - 0.01);
            
            const sensEl = document.getElementById('sensitivityValue');
            const specEl = document.getElementById('specificityValue');
            
            sensEl.textContent = sensitivity.toFixed(3);
            specEl.textContent = specificity.toFixed(3);
            
            // Color coding
            sensEl.className = 'threshold-value ' + (sensitivity >= 0.90 ? 'good' : sensitivity >= 0.80 ? 'warning' : '');
            specEl.className = 'threshold-value ' + (specificity >= 0.90 ? 'good' : specificity >= 0.80 ? 'warning' : '');
        }

        // Modal functions
        function openModal() { 
            document.getElementById('fdaModal').classList.add('active'); 
            // Reset checkboxes
            for (let i = 1; i <= 5; i++) {
                document.getElementById('check' + i).checked = false;
            }
            updateSubmitButton();
        }
        function closeModal() { document.getElementById('fdaModal').classList.remove('active'); }
        function closeModal2() { 
            document.getElementById('fdaModal2').classList.remove('active'); 
            document.getElementById('fdaModal').classList.add('active');
        }
        function closeAllModals() {
            document.getElementById('fdaModal').classList.remove('active');
            document.getElementById('fdaModal2').classList.remove('active');
            document.getElementById('fdaModal3').classList.remove('active');
        }
        
        // Close modals when clicking outside
        document.getElementById('fdaModal').addEventListener('click', (e) => { if (e.target === e.currentTarget) closeModal(); });
        document.getElementById('fdaModal2').addEventListener('click', (e) => { if (e.target === e.currentTarget) closeModal2(); });
        document.getElementById('fdaModal3').addEventListener('click', (e) => { if (e.target === e.currentTarget) closeAllModals(); });
        
        // Check if all checkboxes are checked
        function updateSubmitButton() {
            const allChecked = document.getElementById('check1').checked &&
                              document.getElementById('check2').checked &&
                              document.getElementById('check3').checked &&
                              document.getElementById('check4').checked &&
                              document.getElementById('check5').checked;
            document.getElementById('step1Next').disabled = !allChecked;
        }
        
        // Show step 2 (signature)
        function showStep2() {
            document.getElementById('fdaModal').classList.remove('active');
            document.getElementById('fdaModal2').classList.add('active');
            document.getElementById('signatureInput').value = '';
            document.getElementById('attestCheck').checked = false;
            document.getElementById('signatureTime').textContent = new Date().toLocaleString();
            updateSignButton();
        }
        
        // Check if signature is valid
        function updateSignButton() {
            const signatureValid = document.getElementById('signatureInput').value.trim().length >= 5;
            const attestChecked = document.getElementById('attestCheck').checked;
            document.getElementById('signButton').disabled = !(signatureValid && attestChecked);
        }
        
        // Submit and show success
        function submitFDA() {
            document.getElementById('fdaModal2').classList.remove('active');
            document.getElementById('fdaModal3').classList.add('active');
            document.getElementById('submitTime').textContent = new Date().toLocaleString();
        }

        // Charts
        let charts = {};
        function destroyChart(id) { if (charts[id]) { charts[id].destroy(); delete charts[id]; } }

        function initChartsForTab(tabId) {
            switch(tabId) {
                case 'hospital': initROCChart(); break;
                case 'compliance': initACPChart(); break;
                case 'bias': initBiasRadar(); initPValueChart(); break;
                case 'site': initSiteConsistency(); initLatencyAccuracy(); initDriftAlerts(); break;
                case 'version': initVersionChart(); break;
            }
        }

        function initROCChart() {
            destroyChart('rocChart');
            const ctx = document.getElementById('rocChart');
            if (!ctx) return;
            const generateROC = (auc) => {
                const points = [];
                for (let i = 0; i <= 100; i += 5) {
                    const fpr = i / 100;
                    const tpr = Math.pow(fpr, (1 - auc) / auc);
                    points.push({ x: fpr * 100, y: Math.min(tpr * 100, 100) });
                }
                return points;
            };
            charts['rocChart'] = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [
                        { label: 'Mass General (AUC: 0.94)', data: generateROC(0.94), borderColor: '#0066cc', backgroundColor: 'transparent', borderWidth: 2, tension: 0.4, pointRadius: 0 },
                        { label: 'Mayo Clinic (AUC: 0.92)', data: generateROC(0.92), borderColor: '#0d9488', backgroundColor: 'transparent', borderWidth: 2, tension: 0.4, pointRadius: 0 },
                        { label: 'Cleveland Clinic (AUC: 0.91)', data: generateROC(0.91), borderColor: '#7c3aed', backgroundColor: 'transparent', borderWidth: 2, tension: 0.4, pointRadius: 0 },
                        { label: 'Johns Hopkins (AUC: 0.89)', data: generateROC(0.89), borderColor: '#f59e0b', backgroundColor: 'transparent', borderWidth: 2, tension: 0.4, pointRadius: 0 },
                        { label: 'UCSF Medical (AUC: 0.88)', data: generateROC(0.88), borderColor: '#10b981', backgroundColor: 'transparent', borderWidth: 2, tension: 0.4, pointRadius: 0 },
                        { label: 'Random (AUC: 0.50)', data: [{x: 0, y: 0}, {x: 100, y: 100}], borderColor: 'rgba(0,0,0,0.2)', borderDash: [5, 5], backgroundColor: 'transparent', borderWidth: 1, pointRadius: 0 }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: {
                        x: { type: 'linear', min: 0, max: 100, title: { display: true, text: 'False Positive Rate (%)' }, grid: { color: 'rgba(0,0,0,0.04)' } },
                        y: { min: 0, max: 100, title: { display: true, text: 'True Positive Rate (%)' }, grid: { color: 'rgba(0,0,0,0.04)' } }
                    },
                    plugins: { legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20, font: { size: 11 } } } }
                }
            });
        }

        function initACPChart() {
            destroyChart('acpChart');
            const ctx = document.getElementById('acpChart');
            if (!ctx) return;
            charts['acpChart'] = new Chart(ctx, {
                type: 'line',
                data: { labels: ['v2.0', 'v2.1', 'v2.2', 'v2.3', 'v2.4', 'v2.4.1'], datasets: [{ label: 'AUC Score', data: [0.85, 0.87, 0.89, 0.897, 0.908, 0.912], borderColor: '#0066cc', backgroundColor: 'rgba(0, 102, 204, 0.1)', fill: true, tension: 0.4 }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 0.80, max: 0.95, grid: { color: 'rgba(0,0,0,0.04)' } }, x: { grid: { display: false } } }, plugins: { legend: { display: false } } }
            });
        }

        function initBiasRadar() {
            destroyChart('biasRadar');
            const ctx = document.getElementById('biasRadar');
            if (!ctx) return;
            charts['biasRadar'] = new Chart(ctx, {
                type: 'radar',
                data: { labels: ['Age 18-40', 'Age 41-65', 'Age 65+', 'Male', 'Female', 'White', 'Black', 'Hispanic', 'Asian', 'Pacific Isl.'], datasets: [{ label: 'Sensitivity', data: [0.93, 0.91, 0.88, 0.92, 0.90, 0.91, 0.89, 0.90, 0.92, 0.82], borderColor: '#0066cc', backgroundColor: 'rgba(0, 102, 204, 0.2)', borderWidth: 2, pointRadius: 4 }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { r: { min: 0.70, max: 1.0, ticks: { stepSize: 0.1 }, grid: { color: 'rgba(0,0,0,0.06)' }, pointLabels: { font: { size: 10 } } } }, plugins: { legend: { display: false } } }
            });
        }

        function initPValueChart() {
            destroyChart('pvalueChart');
            const ctx = document.getElementById('pvalueChart');
            if (!ctx) return;
            charts['pvalueChart'] = new Chart(ctx, {
                type: 'bar',
                data: { labels: ['Age', 'Gender', 'Ethnicity', 'Insurance', 'Geography'], datasets: [{ label: 'P-Value', data: [0.23, 0.67, 0.04, 0.45, 0.31], backgroundColor: (ctx) => ctx.raw < 0.05 ? 'rgba(239, 68, 68, 0.8)' : 'rgba(0, 102, 204, 0.8)', borderRadius: 8 }] },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { min: 0, max: 1, grid: { color: 'rgba(0,0,0,0.04)' } }, y: { grid: { display: false } } }, plugins: { legend: { display: false } } }
            });
        }

        function initSiteConsistency() {
            destroyChart('siteConsistency');
            const ctx = document.getElementById('siteConsistency');
            if (!ctx) return;
            charts['siteConsistency'] = new Chart(ctx, {
                type: 'bar',
                data: { labels: ['Mass General', 'Mayo Clinic', 'Cleveland', 'Johns Hopkins', 'UCSF'], datasets: [{ label: 'AUC', data: [0.94, 0.92, 0.91, 0.89, 0.88], backgroundColor: ['#0066cc', '#0d9488', '#7c3aed', '#f59e0b', '#10b981'], borderRadius: 8 }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 0.80, max: 1.0, grid: { color: 'rgba(0,0,0,0.04)' } }, x: { grid: { display: false } } }, plugins: { legend: { display: false } } }
            });
        }

        function initLatencyAccuracy() {
            destroyChart('latencyAccuracy');
            const ctx = document.getElementById('latencyAccuracy');
            if (!ctx) return;
            charts['latencyAccuracy'] = new Chart(ctx, {
                type: 'scatter',
                data: { datasets: [{ label: 'Model Configs', data: [{ x: 150, y: 0.88 }, { x: 180, y: 0.90 }, { x: 198, y: 0.912 }, { x: 220, y: 0.92 }, { x: 280, y: 0.94 }, { x: 350, y: 0.95 }], backgroundColor: '#0066cc', pointRadius: 8 }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'Inference Time (ms)' }, grid: { color: 'rgba(0,0,0,0.04)' } }, y: { min: 0.85, max: 1.0, title: { display: true, text: 'AUC' }, grid: { color: 'rgba(0,0,0,0.04)' } } }, plugins: { legend: { display: false } } }
            });
        }

        function initDriftAlerts() {
            destroyChart('driftAlerts');
            const ctx = document.getElementById('driftAlerts');
            if (!ctx) return;
            charts['driftAlerts'] = new Chart(ctx, {
                type: 'line',
                data: { labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'], datasets: [
                    { label: 'Mass General', data: [0.94, 0.93, 0.94, 0.93, 0.94, 0.93], borderColor: '#0066cc', tension: 0.4, pointRadius: 3 },
                    { label: 'Mayo Clinic', data: [0.92, 0.91, 0.90, 0.88, 0.86, 0.85], borderColor: '#f59e0b', tension: 0.4, pointRadius: 3 },
                    { label: 'Safety Floor', data: [0.85, 0.85, 0.85, 0.85, 0.85, 0.85], borderColor: '#ef4444', borderDash: [5, 5], pointRadius: 0 }
                ] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 0.80, max: 1.0, grid: { color: 'rgba(0,0,0,0.04)' } }, x: { grid: { display: false } } }, plugins: { legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } } } }
            });
        }

        function initVersionChart() {
            destroyChart('versionChart');
            const ctx = document.getElementById('versionChart');
            if (!ctx) return;
            charts['versionChart'] = new Chart(ctx, {
                type: 'line',
                data: { labels: ['v1.0', 'v1.5', 'v2.0', 'v2.1', 'v2.2', 'v2.3', 'v2.4', 'v2.4.1'], datasets: [
                    { label: 'AUC-ROC', data: [0.78, 0.82, 0.85, 0.87, 0.89, 0.897, 0.908, 0.912], borderColor: '#0066cc', backgroundColor: 'rgba(0, 102, 204, 0.1)', fill: true, tension: 0.4 },
                    { label: 'Sensitivity', data: [0.75, 0.79, 0.82, 0.85, 0.87, 0.884, 0.895, 0.901], borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', fill: true, tension: 0.4 },
                    { label: 'Specificity', data: [0.80, 0.84, 0.88, 0.89, 0.90, 0.912, 0.910, 0.908], borderColor: '#7c3aed', backgroundColor: 'rgba(124, 58, 237, 0.1)', fill: true, tension: 0.4 }
                ] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 0.70, max: 1.0, grid: { color: 'rgba(0,0,0,0.04)' } }, x: { grid: { display: false } } }, plugins: { legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } } } }
            });
        }

        document.addEventListener('DOMContentLoaded', () => { initROCChart(); });
    </script>
</body>
</html>
